{"ast":null,"code":"import { GLOBAL_TYPES } from \"./globalType\";\nimport { postDataAPI } from \"../../utils/serverAPI\";\nexport const login = data => async dispatch => {\n  try {\n    dispatch({\n      type: GLOBAL_TYPES.ALERT,\n      payload: {\n        loading: true\n      }\n    });\n    const res = await postDataAPI('login', data);\n    dispatch({\n      type: GLOBAL_TYPES.AUTH,\n      payload: {\n        token: res.data.access_token,\n        user: res.data.user\n      }\n    });\n    localStorage.setItem(\"firstToken\", true);\n    dispatch({\n      type: GLOBAL_TYPES.ALERT,\n      payload: {\n        success: res.data.msg\n      }\n    });\n  } catch (error) {\n    dispatch({\n      type: GLOBAL_TYPES.ALERT,\n      payload: {\n        error: error.response.data.msg\n      }\n    });\n  }\n};\nexport const register = data => async dispatch => {\n  try {\n    dispatch({\n      type: GLOBAL_TYPES.ALERT,\n      payload: {\n        loading: true\n      }\n    });\n    const res = await postDataAPI(\"register\", data);\n    dispatch({\n      type: GLOBAL_TYPES.AUTH,\n      payload: {\n        token: res.data.access_token,\n        user: res.data.user\n      }\n    });\n    localStorage.setItem(\"firstToken\", true);\n    dispatch({\n      type: GLOBAL_TYPES.ALERT,\n      payload: {\n        success: res.data.msg\n      }\n    });\n  } catch (error) {\n    dispatch({\n      type: GLOBAL_TYPES.ALERT,\n      payload: {\n        error: error.response.data.msg\n      }\n    });\n  }\n};\nexport const logout = () => async dispatch => {\n  try {\n    localStorage.removeItem(\"firstToken\");\n    await postDataAPI(\"logout\");\n    window.location.href = '/';\n    dispatch({\n      type: GLOBAL_TYPES.ALERT,\n      payload: {\n        success: \"Success logout\"\n      }\n    });\n  } catch (error) {\n    dispatch({\n      type: GLOBAL_TYPES.ALERT,\n      payload: {\n        error: error.response.data.msg\n      }\n    });\n  }\n};\nexport const refresh_token = () => async dispatch => {\n  const firstToken = localStorage.getItem(\"firstToken\");\n  if (firstToken) {\n    try {\n      dispatch({\n        type: GLOBAL_TYPES.ALERT,\n        payload: {\n          loading: true\n        }\n      });\n      const res = await postDataAPI(\"refresh_token\");\n      dispatch({\n        type: GLOBAL_TYPES.AUTH,\n        payload: {\n          token: res.data.access_token,\n          user: res.data.user\n        }\n      });\n      dispatch({\n        type: GLOBAL_TYPES.ALERT,\n        payload: {}\n      });\n    } catch (error) {\n      dispatch({\n        type: GLOBAL_TYPES.ALERT,\n        payload: {\n          error: error.response.data.msg\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["GLOBAL_TYPES","postDataAPI","login","data","dispatch","type","ALERT","payload","loading","res","AUTH","token","access_token","user","localStorage","setItem","success","msg","error","response","register","logout","removeItem","window","location","href","refresh_token","firstToken","getItem"],"sources":["/home/anvar/Desktop/mohirfest/client/src/redux/actions/authAction.js"],"sourcesContent":["import { GLOBAL_TYPES } from \"./globalType\";\nimport { postDataAPI } from \"../../utils/serverAPI\";\n\nexport const login = (data) => async (dispatch) => {\n    try {\n        dispatch({ type: GLOBAL_TYPES.ALERT, payload: { loading: true } })\n        const res = await postDataAPI('login', data)\n        dispatch({\n            type: GLOBAL_TYPES.AUTH,\n            payload: {\n                token: res.data.access_token,\n                user: res.data.user\n            }\n        })\n\n        localStorage.setItem(\"firstToken\", true)\n\n        dispatch({\n            type: GLOBAL_TYPES.ALERT,\n            payload: {\n                success: res.data.msg\n            }\n        })\n\n    } catch (error) {\n        dispatch({\n            type: GLOBAL_TYPES.ALERT,\n            payload: {\n                error: error.response.data.msg\n            }\n        })\n    }\n}\n\nexport const register = (data) => async (dispatch) => {\n    try {\n        dispatch({type: GLOBAL_TYPES.ALERT, payload: {loading: true}})\n        const res = await postDataAPI(\"register\", data)\n        dispatch({\n            type: GLOBAL_TYPES.AUTH,\n            payload: {\n                token: res.data.access_token,\n                user: res.data.user\n            }\n        })\n\n        localStorage.setItem(\"firstToken\", true)\n        \n        dispatch({\n            type: GLOBAL_TYPES.ALERT,\n            payload: {\n                success: res.data.msg\n            }\n        })\n    } catch (error) {\n        dispatch({\n            type: GLOBAL_TYPES.ALERT,\n            payload: {\n                error: error.response.data.msg\n            }\n        })\n    }\n}\n\nexport const logout = () => async (dispatch) => {\n    try {\n        localStorage.removeItem(\"firstToken\")\n        await postDataAPI(\"logout\")\n        window.location.href = '/'\n        dispatch({\n            type: GLOBAL_TYPES.ALERT,\n            payload: {\n                success: \"Success logout\"\n            }\n        })\n    } catch (error) {\n        dispatch({\n            type: GLOBAL_TYPES.ALERT,\n            payload: {\n                error: error.response.data.msg\n            }\n        })\n    }\n}\n\nexport const refresh_token = () => async (dispatch) => {\n    const firstToken = localStorage.getItem(\"firstToken\")\n    if (firstToken) {\n        try {\n            dispatch({type: GLOBAL_TYPES.ALERT, payload: {loading: true}})\n            const res = await postDataAPI(\"refresh_token\");\n            dispatch({\n                type: GLOBAL_TYPES.AUTH,\n                payload: {\n                    token: res.data.access_token,\n                    user: res.data.user\n                }\n            })\n            dispatch({type: GLOBAL_TYPES.ALERT, payload: {}})\n        } catch (error) {\n            dispatch({ type: GLOBAL_TYPES.ALERT, payload: { error: error.response.data.msg } })\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}